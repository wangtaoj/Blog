### åŠ å¯†ç®—æ³•

* **å¯¹ç§°åŠ å¯†**ï¼šåŠ å¯†è§£å¯†ä½¿ç”¨ç›¸åŒå¯†é’¥ï¼Œå…¸å‹çš„ç®—æ³•ç¤ºä¾‹ä¸ºAES
* **éå¯¹ç§°åŠ å¯†**ï¼šå­˜åœ¨ä¸€å¯¹ç§˜é’¥ï¼Œå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†(åŠ å¯†åœºæ™¯)ï¼Œç§é’¥ç­¾åï¼Œå…¬é’¥éªŒç­¾(ç­¾ååœºæ™¯)ï¼Œå…¸å‹çš„ç®—æ³•ç¤ºä¾‹ä¸ºRSA

| ç‰¹æ€§     | å¯¹ç§°åŠ å¯†         | éå¯¹ç§°åŠ å¯†         |
| :------- | :--------------- | :----------------- |
| **é€Ÿåº¦** | âš¡ æå¿«ï¼ˆGB/sçº§ï¼‰ | ğŸ¢ æ…¢ï¼ˆçº¦æ…¢1000å€ï¼‰ |

### ä¸ºä»€ä¹ˆéœ€è¦ HTTPSï¼Ÿ

1. **HTTP çš„é—®é¢˜ï¼šæ˜ä¿¡ç‰‡æ—¶ä»£**
   - **æ˜æ–‡ä¼ è¾“ï¼š** HTTP åè®®ä¼ è¾“çš„æ‰€æœ‰æ•°æ®ï¼ˆä½ æµè§ˆçš„ç½‘é¡µå†…å®¹ã€è¾“å…¥çš„è´¦å·å¯†ç ã€ä¿¡ç”¨å¡å·ã€èŠå¤©è®°å½•ç­‰ï¼‰éƒ½æ˜¯æœªç»åŠ å¯†çš„æ˜æ–‡ã€‚å°±åƒå†™åœ¨æ˜ä¿¡ç‰‡ä¸Šã€‚
   - **çªƒå¬é£é™©ï¼š** æ•°æ®åœ¨ç½‘ç»œä¸­ä¼ è¾“ä¼šç»è¿‡å¾ˆå¤šèŠ‚ç‚¹ï¼ˆè·¯ç”±å™¨ã€äº¤æ¢æœºã€WiFi æ¥å…¥ç‚¹ç­‰ï¼‰ã€‚ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„æ”»å‡»è€…éƒ½å¯ä»¥è½»æ˜“**çªƒå¬**å¹¶è·å–ä½ ä¼ è¾“çš„æ•æ„Ÿä¿¡æ¯ã€‚
   - **ç¯¡æ”¹é£é™©ï¼š** æ”»å‡»è€…ä¸ä»…å¯ä»¥çœ‹ï¼Œè¿˜å¯ä»¥**ç¯¡æ”¹**ä½ å‘é€æˆ–æ¥æ”¶çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘é¡µé‡Œæ’å…¥å¹¿å‘Šã€æ¶æ„é“¾æ¥ï¼Œæˆ–è€…ä¿®æ”¹ä½ è½¬è´¦çš„æ”¶æ¬¾è´¦å·å’Œé‡‘é¢ï¼ˆä¸­é—´äººæ”»å‡»ï¼‰ã€‚
   - **å†’å……é£é™©ï¼š** ä½ è®¿é—®çš„ `www.yourbank.com` çœŸçš„æ˜¯ä½ çš„é“¶è¡Œå—ï¼Ÿæ”»å‡»è€…å¯ä»¥æ­å»ºä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å‡ç½‘ç«™ï¼ˆé’“é±¼ç½‘ç«™ï¼‰ï¼Œè¯±éª—ä½ è¾“å…¥è´¦å·å¯†ç ã€‚HTTP æœ¬èº«æ— æ³•éªŒè¯ç½‘ç«™çš„çœŸå®èº«ä»½ã€‚
2. **HTTPS çš„è¯ç”Ÿï¼šå®‰å…¨ä¿¡å°**
   - **æ ¸å¿ƒç›®æ ‡ï¼š** è§£å†³ HTTP çš„ä¸‰å¤§å®‰å…¨é—®é¢˜ - **ä¿å¯†æ€§ã€å®Œæ•´æ€§ã€èº«ä»½è®¤è¯**ã€‚
   - **åŸºæœ¬å®šä¹‰ï¼š** HTTPS ä¸æ˜¯ä¸€ä¸ªæ–°çš„åè®®ã€‚å®ƒ = **HTTP** + **SSL/TLS**ã€‚
     - `HTTP`ï¼šè´Ÿè´£å®é™…çš„æ•°æ®ä¼ è¾“ï¼ˆå†…å®¹æœ¬èº«ï¼‰ã€‚
     - `SSL (Secure Sockets Layer)` / `TLS (Transport Layer Security)`ï¼šè´Ÿè´£åœ¨ HTTP ä¼ è¾“å±‚ä¹‹ä¸Šå»ºç«‹ä¸€ä¸ª**å®‰å…¨çš„åŠ å¯†é€šé“**ã€‚ç›®å‰ä¸»è¦ä½¿ç”¨æ›´å®‰å…¨ã€æ›´æ–°çš„ TLS (SSL 3.0 å·²è¢«æ·˜æ±°ï¼Œé€šå¸¸æˆ‘ä»¬è¯´ SSL æŒ‡ä»£çš„æ˜¯ TLS)ã€‚

### HTTPS å¦‚ä½•å·¥ä½œï¼Ÿï¼ˆTLS/SSL çš„ä½œç”¨ï¼‰

HTTPS çš„å®‰å…¨ä¿éšœä¸»è¦ä¾èµ–äº TLS/SSL åè®®ã€‚å…¶æ ¸å¿ƒè¿‡ç¨‹æ˜¯ **â€œTLS æ¡æ‰‹â€**ï¼Œç›®çš„æ˜¯åå•†å‡ºä¸€ä¸ªåªæœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çŸ¥é“çš„**ä¼šè¯å¯†é’¥**ï¼Œç”¨äºåç»­é€šä¿¡çš„å¯¹ç§°åŠ å¯†ã€‚**æ¡æ‰‹è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°äº†éå¯¹ç§°åŠ å¯†ï¼Œåœ¨ä¼ è¾“æ•°æ®æ—¶ä½¿ç”¨å¯¹ç§°åŠ å¯†ã€‚**

- **å¯†é’¥äº¤æ¢ç®€åŒ–æµç¨‹ï¼š**

  1. æœåŠ¡å™¨æŠŠè‡ªå·±çš„**å…¬é’¥**å‘é€ç»™å®¢æˆ·ç«¯ï¼ˆåŒ…å«åœ¨è¯ä¹¦ä¸­ï¼‰ã€‚
  2. å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºçš„**å¯¹ç§°ä¼šè¯å¯†é’¥**ã€‚
  3. å®¢æˆ·ç«¯ç”¨æœåŠ¡å™¨çš„**å…¬é’¥**åŠ å¯†è¿™ä¸ª**å¯¹ç§°ä¼šè¯å¯†é’¥**ã€‚
  4. å®¢æˆ·ç«¯æŠŠåŠ å¯†åçš„å¯¹ç§°å¯†é’¥å‘é€ç»™æœåŠ¡å™¨ã€‚
  5. æœåŠ¡å™¨ç”¨è‡ªå·±çš„**ç§é’¥**è§£å¯†ï¼Œå¾—åˆ°å¯¹ç§°ä¼šè¯å¯†é’¥ã€‚
  6. ç°åœ¨åŒæ–¹éƒ½å®‰å…¨åœ°æ‹¥æœ‰äº†åŒä¸€ä¸ªå¯¹ç§°ä¼šè¯å¯†é’¥ï¼Œåç»­é€šä¿¡ä½¿ç”¨å®ƒè¿›è¡Œå¿«é€Ÿçš„å¯¹ç§°åŠ å¯†ã€‚

- **ä¸ºä»€ä¹ˆä¸èƒ½åªç”¨å¯¹ç§°åŠ å¯†ï¼Ÿ** 

  å› ä¸ºå¦‚ä½•å®‰å…¨åœ°æŠŠè¿™ä¸ªå¯¹ç§°å¯†é’¥ä»æœåŠ¡å™¨ä¼ ç»™å®¢æˆ·ç«¯æ˜¯ä¸ªå¤§é—®é¢˜ï¼ˆåœ¨äº’è”ç½‘ä¸Šç›´æ¥å‘å¯†é’¥ï¼Œä¼šè¢«çªƒå¬ï¼‰ã€‚

- **ä¸ºä»€ä¹ˆéœ€è¦è¯ä¹¦ï¼ŒæœåŠ¡å™¨ç›´æ¥å‘é€å…¬é’¥ï¼Œä¸é€šè¿‡è¯ä¹¦è¡Œä¸è¡Œ?**

  æ²¡æœ‰è¯ä¹¦çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ç¡®ä¿æ‹¿åˆ°çš„å…¬é’¥å°±æ˜¯æˆ‘æƒ³è¦è®¿é—®çš„ç½‘ç«™å‘é€çš„å‘¢ï¼Œè€Œä¸æ˜¯æ”»å‡»è€…ä¼ªé€ çš„ï¼Œ**è§£å†³æ–¹æ¡ˆå°±æ˜¯é€šè¿‡æ•°å­—è¯ä¹¦ï¼Œå› ä¸ºè¯ä¹¦ä¸Šæœ‰ç­¾åï¼Œæµè§ˆå™¨å¿…é¡»éªŒè¯ç­¾åæˆåŠŸåï¼Œæ‰ä¼šä¿¡ä»»è¿™ä¸ªè¯ä¹¦ï¼Œä¿¡ä»»è¿™ä¸ªå…¬é’¥ã€‚**

- **è¯ä¹¦å†…å®¹ï¼š** ç”±å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹æœºæ„ **CA (Certificate Authority)** é¢å‘ã€‚åŒ…å«ï¼š

  - ç½‘ç«™çš„åŸŸå (Subject)ã€‚
  - ç½‘ç«™æœåŠ¡å™¨çš„**å…¬é’¥**ã€‚
  - è¯ä¹¦çš„é¢å‘è€… (Issuer - CA)ã€‚
  - è¯ä¹¦çš„æœ‰æ•ˆæœŸã€‚
  - CA ä½¿ç”¨è‡ªå·±çš„**ç§é’¥**å¯¹ä»¥ä¸Šä¿¡æ¯åšçš„**æ•°å­—ç­¾å**ã€‚

- **éªŒè¯è¿‡ç¨‹ (ä¿¡ä»»é“¾)ï¼š**

  1. å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨/æ“ä½œç³»ç»Ÿï¼‰å†…ç½®äº†**ä¿¡ä»»çš„æ ¹ CA è¯ä¹¦(åŒ…å«äº†å¯¹åº”å…¬é’¥)ã€‚**
  2. æœåŠ¡å™¨åœ¨æ¡æ‰‹æ—¶å‘é€æˆ‘ä»¬è‡ªå·±ç½‘ç«™çš„æ•°å­—è¯ä¹¦æ–‡ä»¶(**è¯¥è¯ä¹¦ç”±CAæœºæ„é¢å‘ï¼Œå¹¶ä¸”ä½¿ç”¨äº†CAæœºæ„çš„ç§é’¥è¿›è¡Œç­¾å**)ã€‚
  3. å®¢æˆ·ç«¯ç”¨å†…ç½®çš„æ ¹ CA å…¬é’¥éªŒè¯è¯ä¹¦ä¸Š CA çš„ç­¾åæ˜¯å¦æœ‰æ•ˆã€‚
  4. å®¢æˆ·ç«¯æ£€æŸ¥è¯ä¹¦ä¸­çš„åŸŸåæ˜¯å¦ä¸å½“å‰è®¿é—®çš„åŸŸåä¸€è‡´ã€‚
  5. å®¢æˆ·ç«¯æ£€æŸ¥è¯ä¹¦æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ã€‚
  6. å¦‚æœæ‰€æœ‰æ£€æŸ¥éƒ½é€šè¿‡ï¼Œå®¢æˆ·ç«¯å°±**ä¿¡ä»»**è¿™ä¸ªè¯ä¹¦ï¼Œè¿›è€Œä¿¡ä»»é‡Œé¢çš„å…¬é’¥ç¡®å®å±äºå®ƒæ­£åœ¨è®¿é—®çš„åˆæ³•ç½‘ç«™ã€‚

- **CA çš„è§’è‰²ï¼š** å……å½“äº’è”ç½‘ä¸Šçš„â€œå…¬è¯å¤„â€ã€‚å®ƒä¼šåœ¨ç­¾å‘è¯ä¹¦å‰éªŒè¯ç”³è¯·è€…ï¼ˆé€šå¸¸æ˜¯ç½‘ç«™æ‰€æœ‰è€…ï¼‰å¯¹è¯¥åŸŸåçš„æ§åˆ¶æƒï¼ˆéªŒè¯è¿‡ç¨‹ä¸¥æ ¼ç¨‹åº¦ä¸åŒï¼Œå¯¹åº” DV, OV, EV è¯ä¹¦ç­‰çº§ï¼‰ã€‚æµè§ˆå™¨åªä¿¡ä»»ç”±å®ƒå†…ç½®åˆ—è¡¨ä¸­çš„ CA ç­¾å‘çš„è¯ä¹¦ã€‚

- **é”å›¾æ ‡çš„æ„ä¹‰ï¼š** æµè§ˆå™¨æ˜¾ç¤ºé”å›¾æ ‡ï¼Œæ„å‘³ç€å®ƒæˆåŠŸéªŒè¯äº†æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œç¡®è®¤äº†ç½‘ç«™çš„èº«ä»½ã€‚

- **å¦‚æœæµè§ˆå™¨æ— æ³•éªŒè¯ç½‘ç«™çš„è¯ä¹¦æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ**

  æ­¤æ—¶æµè§ˆå™¨ä¼šå°†è®¿é—®æ§åˆ¶æƒäº¤ç»™ç”¨æˆ·ï¼Œå¹¶ä¸”åœ°å€æ ä¼šæ˜¾ç¤ºçº¢è‰²çš„å‰å·ï¼Œå¦‚æœç”¨æˆ·ç¡®è®¤è¦è®¿é—®æ—¶ï¼Œæ•°æ®ä¼ è¾“è¿‡ç¨‹è¿˜æ˜¯ä¼šè¿›è¡ŒåŠ å¯†ï¼Œå› ä¸ºæ•°å­—è¯ä¹¦ä¸Šçš„å…¬é’¥å¯ä»¥ç›´æ¥è·å–åˆ°ï¼Œç”¨æ¥å¯¹å¯¹ç§°åŠ å¯†ä½¿ç”¨åˆ°çš„å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼Œåªä¸è¿‡è¯¥å…¬é’¥(è¯ä¹¦)ä¸è¢«æµè§ˆå™¨ä¿¡ä»»è€Œå·²ã€‚

### è‡ªç­¾åè¯ä¹¦

æ‰€è°“è‡ªç­¾åè¯ä¹¦å°±æ˜¯ç”¨è‡ªå·±çš„ç§é’¥æ¥è¿›è¡Œç­¾åçš„ï¼Œå³ç½‘ç«™æœåŠ¡ç«¯ä½¿ç”¨è¿™ä¸ªè¯ä¹¦æ—¶ï¼Œåªè¦æ“ä½œç³»ç»Ÿä¹Ÿå®‰è£…äº†è¿™ä¸ªè¯ä¹¦ï¼Œä½¿ç”¨httpsè®¿é—®æ—¶å°±ä¸ä¼šæœ‰å®‰å…¨è­¦å‘Šäº†ã€‚ä¸åƒCAæœºæ„é¢å‘çš„è¯ä¹¦ï¼Œæ˜¯ä½¿ç”¨CAæœºæ„çš„ç§é’¥è¿›è¡Œç­¾åçš„ï¼Œå› æ­¤éœ€è¦æ“ä½œç³»ç»Ÿå®‰è£…è¯¥CAæœºæ„ç§é’¥å¯¹åº”çš„è¯ä¹¦æ–‡ä»¶(è¯ä¹¦åŒ…å«äº†å¯¹åº”çš„å…¬é’¥)ï¼Œè¿™æ ·æµè§ˆå™¨æ‰èƒ½å¯¹è‡ªå·±çš„è¯ä¹¦è¿›è¡Œç­¾åéªŒè¯ã€‚

### httpsç¤ºä¾‹

ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ + SpringBootæ„å»º

#### ä½¿ç”¨opensslåˆ›å»ºè‡ªç­¾åè¯ä¹¦

```bash
# ä¸€æ­¥ç›´æ¥ç”Ÿæˆç§é’¥ä»¥åŠè¯ä¹¦æ–‡ä»¶
openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \
  -keyout private.key -out wangtaoj.crt \
  -subj "/C=CN/ST=Hunan/L=Changsha/O=wangtaoj/OU=wangtaoj/CN=www.wangtaoj.com" \
  -addext "subjectAltName=DNS:localhost,DNS:www.wangtaoj.com,IP:127.0.0.1"
  
# æŸ¥çœ‹è¯ä¹¦å†…å®¹
openssl x509 -in wangtaoj.crt -text -noout
```

å‚æ•°è¯´æ˜ï¼š

- `-x509`ï¼šç”Ÿæˆè‡ªç­¾åè¯ä¹¦
- `-newkey rsa:4096`ï¼šç”Ÿæˆ 4096 ä½çš„ RSA ç§é’¥
- `-sha256`ï¼šä½¿ç”¨ SHA-256 ç­¾åç®—æ³•
- `-days 3650`ï¼šè¯ä¹¦æœ‰æ•ˆæœŸï¼ˆ10å¹´ï¼‰
- `-nodes`ï¼šä¸åŠ å¯†ç§é’¥ï¼ˆæ— å¯†ç ï¼‰
- `-keyout server.key`ï¼šç§é’¥è¾“å‡ºæ–‡ä»¶
- `-out server.crt`ï¼šè¯ä¹¦è¾“å‡ºæ–‡ä»¶
- `-subj`ï¼šè¯ä¹¦ä¸»é¢˜ï¼ˆæŒ‰éœ€ä¿®æ”¹ï¼‰ï¼š
  - `C`ï¼šå›½å®¶ï¼ˆå¦‚ CNï¼Œä»£è¡¨ä¸­å›½ï¼‰
  - `ST`ï¼šçœ/å·
  - `L`ï¼šåŸå¸‚
  - `O`ï¼šç»„ç»‡å
  - `OU`ï¼šéƒ¨é—¨
  - `CN`ï¼šä¸»åŸŸå
- `-addext`ï¼šæ·»åŠ æ‰©å±•ï¼ˆæ”¯æŒå¤šåŸŸå/IPï¼‰(å¿…é¡»æ·»åŠ )ï¼š
  - `DNS:localhost`ï¼šåŸŸå
  - `IP:127.0.0.1`ï¼šIP åœ°å€

å…³é”®è¯´æ˜ï¼š

1. **SANï¼ˆSubject Alternative Nameï¼‰**ï¼š

   ç°ä»£æµè§ˆå™¨è¦æ±‚è¯ä¹¦åŒ…å« SAN æ‰©å±•ï¼ŒåŠ¡å¿…åœ¨ `subjectAltName` ä¸­æ·»åŠ æ‰€æœ‰éœ€è¦æ”¯æŒçš„åŸŸå/IPï¼Œ**å¦åˆ™æµè§ˆå™¨ä¼šæç¤ºæ²¡æœ‰æŒ‡å®šä¸»é¢˜å¤‡ç”¨åç§°**

2. ä¸Šé¢çš„è¯ä¹¦ä¾¿å¯ä»¥é€šè¿‡localhostã€www.wangtaoj.comã€127.0.0.1è®¿é—®ï¼Œå¹¶ä¸”æ˜¯å®‰å…¨çš„ã€‚

#### æ“ä½œç³»ç»Ÿå®‰è£…è¯¥è¯ä¹¦æ–‡ä»¶

macoséœ€è¦åœ¨é’¥åŒ™ä¸²è®¿é—®->ç™»å½•é¡µé¢ï¼Œå°†è¯ä¹¦æ‹–è¿›å»ï¼Œç„¶ååŒå‡»è¯ä¹¦ï¼Œæ‰“å¼€è¯¦æƒ…åœ¨ä¿¡ä»»é‡Œé€‰æ‹©å§‹ç»ˆä¿¡ä»»å³å¯ã€‚

#### Spring Bootåº”ç”¨httpsé…ç½®

```yml
server:
  port: 443
  ssl:
    certificate: classpath:certificate/wangtaoj.crt
    certificate-private-key: classpath:certificate/private.key
```

